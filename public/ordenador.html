<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>INTEK-IT | Detalle del Dispositivo Editable</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="/css/ordenador.css">
</head>
<body>
<aside>
  <div class="logo">INTEK-IT</div>
  <nav>
    <a href="/dashboard.html"><i class="fa-solid fa-chart-line"></i> <span>Dashboard</span></a>
    <a href="/inventario.html"><i class="fa-solid fa-desktop"></i> <span>Inventario IT</span></a>
    <a href="/licencias.html"><i class="fa-solid fa-key"></i> <span>Licencias</span></a>
    <a href="/dominios.html"><i class="fa-solid fa-globe"></i> <span>Dominios</span></a>
    <a href="/empleados.html"><i class="fa-solid fa-users"></i> <span>Empleados</span></a>
    <a href="#"><i class="fa-solid fa-headset"></i> <span>Helpdesk</span></a>
    <a href="#" id="btnLogout"><i class="fa-solid fa-right-from-bracket"></i> <span>Salir</span></a>
  </nav>
</aside>

<div class="main-content">
<header>
  <span><i class="fa-solid fa-desktop"></i> Detalle del Dispositivo</span>
  <a href="/inventario.html"><i class="fa-solid fa-arrow-left"></i> Volver al Inventario</a>
</header>

<div class="container">
  <!-- Modal reutilizable para edición -->
  <div id="modalOverlay">
    <div class="modalContent">
      <h3 id="modalTitle">Editar</h3>
      <div id="modalFields"></div>
      <!-- Los botones se generan dinámicamente desde JS -->
    </div>
  </div>
  <!-- Estado del dispositivo -->
  <div id="estadoBadge" style="margin-bottom:1.2rem;"></div>
<!-- Modal para cambiar estado -->
<div id="modalEstadoOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(30,58,138,0.85);z-index:9999;align-items:center;justify-content:center;">
  <div style="background:#fff;padding:2.5rem 2.5rem;border-radius:16px;box-shadow:0 4px 24px rgba(0,0,0,0.12);max-width:90vw;text-align:center;">
    <h3 style="color:#1e3a8a;margin-bottom:1.5rem;">Cambiar Estado del Dispositivo</h3>
    <select id="selectNuevoEstado" style="padding:0.7em 1.2em;font-size:1.1em;border-radius:8px;border:1px solid #d1d5db;margin-bottom:2rem;">
      <option value="operativo">Operativo</option>
      <option value="en reparación">En reparación</option>
      <option value="baja">Baja</option>
      <option value="stock">Stock</option>
    </select><br>
    <button onclick="guardarNuevoEstado()" style="background:#3b82f6;color:#fff;padding:0.7em 2em;border:none;border-radius:8px;font-size:1em;cursor:pointer;margin-right:1em;">Guardar</button>
    <button onclick="cerrarModalEstado()" style="background:#9ca3af;color:#fff;padding:0.7em 2em;border:none;border-radius:8px;font-size:1em;cursor:pointer;">Cancelar</button>
  </div>
</div>
  <!-- Información Básica -->
  <div class="device-info">
    <div class="device-card" id="basicInfoCard">
  <h3>Información Básica</h3>
  <p>TRAZA EQUIPO: <span id="traza"></span></p>
  <p>Tipo: <span id="tipo"></span></p>
  <p>Categoría: <span id="categoria"></span></p>
  <!-- Nombre eliminado de información básica -->
  <p>Modelo: <span id="modelo"></span></p>
  <p>Marca: <span id="marca"></span></p>
  <p>Nº Serie: <span id="serie"></span></p>
  <p>Estado: <span id="estado"></span></p>
  <p>Ubicación: <span id="ubicacion"></span></p>
  <p>Fecha de compra: <span id="fechaCompra"></span></p>
  <p>Responsable: <span id="empleadoActual"></span></p>
  <p>Observaciones: <span id="observaciones"></span></p>
  <button class="action-btn" onclick="openEditModal('basic')">Editar Información Básica</button>
    </div>

    <div class="device-card" id="featuresCard">
  <h3>Características</h3>
  <p>CPU: <span id="cpu"></span></p>
  <p>RAM: <span id="ram"></span></p>
  <p>Almacenamiento: <span id="storage"></span></p>
  <p>Sistema Operativo: <span id="os"></span></p>
  <button class="action-btn" onclick="openEditModal('features')">Editar Características</button>
    </div>
  </div>

  <!-- Historial de Asignaciones -->
  <div class="section">
    <h3>Historial de Asignaciones</h3>
  <button class="action-btn" onclick="openEditModal('assignment')">Añadir Asignación</button>
  <table class="section" style="width:100%;">
      <thead>
  <tr><th>Traza Equipo</th><th>Empleado</th><th>Departamento</th><th>Fecha Inicio</th><th>Fecha Fin</th><th>Acciones</th></tr>
      </thead>
      <tbody id="assignmentsTable">
  <!-- Se renderiza dinámicamente -->
      </tbody>
    </table>
  </div>

  <!-- Historial de Reparaciones -->
  <div class="section">
    <h3>Historial de Reparaciones</h3>
  <button class="action-btn" onclick="openEditModal('repair')">Añadir Reparación</button>
  <table class="section" style="width:100%;">
      <thead>
  <tr><th>Fecha</th><th>Técnico</th><th>Estado</th><th>Problema</th><th>Acciones</th></tr>
      </thead>
      <tbody id="repairsTable">
        <!-- Se renderiza dinámicamente -->
      </tbody>
    </table>
  </div>
</div>

<footer>© 2025 INTEK-IT | Todos los derechos reservados</footer>
</div>


<script src="/js/ordenador.js"></script>
</body>
</html>